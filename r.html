<!DOCTYPE html>
<html>
<head>
    <style>
        textarea {
            width: 100%;
            height: 20em;
        }
    </style>
    <script src="r.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function (evt) {


        document.getElementById('build').addEventListener('click', function (evt) {
            requirejs.optimize({
            baseUrl: "./assets/js",
            name: "config_application",
            mainConfigFile: "./assets/js/config_application.js",
            //out: "./assets/js/require_main.built.js",
            //wrapShim: true,
            findNestedDependencies: true,
            //optimize: 'none',
            //optimizeAllPluginResources: false,
            //stubModules : ['text', 'twig','jquery','backbone','marionette','underscore'],
                //include: ['a'],
                out: function (text) {
                    document.getElementById('output').value = text;
                }
            }, function (buildText) {
                document.getElementById('buildMessages').value = buildText;
            });
        }, false);


        document.getElementById('print').addEventListener('click', function (evt) {
          var output = document.getElementById('output').value;
          var out = window.open("output.js","output.js");
          alert("next>>")
          out.document.open("text/plain", false)
          out.document.write(output)
          out.document.close()
        }, false);


    }, false);


    </script>
</head>
<body>
    <h1>r.js in the browser</h1>


    <p>A test of running r.js in the browser.</p>

    <p>
        <button id="build">Build it</button>
    </p>

    <h2>Build Messages</h2>
    <textarea id="buildMessages"></textarea>

    <h2>Output</h2>
    <textarea id="output"></textarea>
    <p>
        <button id="print">Print it</button>
    </p>

</body>
</html>
